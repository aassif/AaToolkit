################################################################################
# Compilateur ##################################################################
################################################################################

GCC_DEFAULT=    g++ -W -Wall -pedantic
GCC_DEBUG=      $(GCC_DEFAULT) -O0 -ggdb3 -pg
GCC_RELEASE=    $(GCC_DEFAULT) -O3 -ggdb3
#GCC=            $(GCC_DEBUG)
GCC=            $(GCC_RELEASE)

################################################################################
# Chemins ######################################################################
################################################################################

#L_X11=          -L/usr/X11R6/lib -lXmu -lXi
#L_GLU=          -lGL -lGLU -lglut $(L_X11)

# AaToolkit ####################################################################

P_AaToolkit=    $(HOME)/wrk/toolkit
I_AaToolkit=    -I$(P_AaToolkit)/include
L_AaToolkit=    -L$(P_AaToolkit)/lib -lAaToolkit

################################################################################
# Variables ####################################################################
################################################################################

EXE=            main
HDR=            
SRC=            
OBJ=            $(HDR:%.h=%.moc.o) $(SRC:%.cc=%.o)
ALL=            make.depend ../lib/libAaToolkit.so $(EXE)

################################################################################
# Règles #######################################################################
################################################################################

all:            $(ALL)

main:           main.o $(OBJ)
								$(GCC) $< $(OBJ) $(L_AaToolkit) -o $@

%.o:            %.cc
								$(GCC) -c $(I_AaToolkit) $< -o $@

%.moc.cc:       %.h
								$(MOC) $< -o $@

################################################################################
# Ménage #######################################################################
################################################################################

clean:
								rm -f $(EXE:%=%.o) $(HDR:%.h=%.moc.cc) $(OBJ) $(ALL)
								rm -f core *~ gmon.* a.out

################################################################################
# Dépendances ##################################################################
################################################################################

dep:
								g++ -MM $(I_AaToolkit) $(SRC) $(EXE:%=%.cc) >make.depend

make.depend:    $(SRC) $(EXE:%=%.cc) Makefile
								g++ -MM $(I_AaToolkit) $(SRC) $(EXE:%=%.cc) >make.depend

include make.depend

